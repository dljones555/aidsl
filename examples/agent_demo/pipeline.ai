-- Agent demo: invoice extraction with flagging
-- Drop files in inbox/, run run_agent.py, results split into output/

DEFINE line_item:
  description TEXT
  quantity    NUMBER
  unit_price  MONEY

DEFINE invoice:
  vendor       TEXT
  invoice_num  TEXT
  total        MONEY
  items        LIST OF line_item
  category     ONE OF [office, software, services, meals, other]

FROM inbox/
EXTRACT invoice
FLAG WHEN total OVER 1000
OUTPUT output/latest.json
