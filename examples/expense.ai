-- Expense report processor
-- Extracts structured data from receipt text and flags policy violations

SET MODEL gpt-4.1
SET TEMPERATURE 0
SET SEED 42

DEFINE expense:
  merchant    TEXT
  amount      MONEY
  category    ONE OF [travel, meals, equipment, software, office]

FROM receipts.csv
EXTRACT expense USE expense_samples
FLAG WHEN amount OVER 500
FLAG WHEN category IS travel AND amount OVER 200
OUTPUT expenses.json
